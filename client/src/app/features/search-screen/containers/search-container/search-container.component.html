<section class="flex">
  <calorie-app-non-auth-header *ngIf="!isAuthenticated" class="linear-background w-full" [isAuthenticated]="isAuthenticated"></calorie-app-non-auth-header>
  <section *ngIf="isAuthenticated" class="p-6 w-full h-full"
           [ngClass]="{'flex justify-center items-center h-screen linear-background': !selectedProducts.length}">
    <div *ngIf="selectedProducts.length" class="flex items-center justify-between py-4" [@enter]>
      <div>
        <h1 class="font-semibold text-2xl uppercase">Receptų ir produktų paieška</h1>
        <h2 class="text-md font-semibold">Dienos tikslas ({{user.calories}} kcal)</h2>
        <h2 class="text-md font-semibold">Liko ({{user.calories - totals.calories }} kcal)</h2>
      </div>
      <div class="flex gap-6">
        <calorie-app-pie
          *ngIf="selectedProducts.length"
          [chartSize]="pieChartSize"
          [chartData]="chartData | async"
          [chartOptions]="chartOptions">
        </calorie-app-pie>
        <calorie-app-totals-row [totals]="totals"></calorie-app-totals-row>
      </div>
    </div>
    <div *ngIf="!selectedProducts.length" class="w-full w-screen flex flex-col gap-2">
      <div class="text-white flex w-1/2 items-center gap-2">
        <h1 class="font-semibold text-white text-5xl uppercase">Pradėkite paiešką</h1>
        <span class="arrow-bounce">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M19 13l-7 7-7-7m14-8l-7 7-7-7" />
        </svg>
        </span>
      </div>
      <calorie-app-search-bar
        class="w-1/2 "
        [products]="products"
        (productChangeEvent)="productChange($event)">
      </calorie-app-search-bar>
    </div>
    <div *ngIf="selectedProducts.length" class="flex gap-2">
      <calorie-app-search-bar
        class="w-10/12"
        [products]="products"
        (productChangeEvent)="productChange($event)">
      </calorie-app-search-bar>
      <button (click)="enterProducts()" class="w-2/12 rounded-md bg-secondary-500 hover:bg-primary-500 px-2 py-1">Išsaugoti</button>
    </div>
    <calorie-app-select-product-list
      [@enter]
      *ngIf="selectedProducts.length"
      [products]="products"
      [selectedProducts]="selectedProducts"
      (quantityChangeEvent)="quantityChange($event)"
      (removeItemEvent)="removeItem($event)"></calorie-app-select-product-list>
  </section>
</section>
